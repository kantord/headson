/* Mermaid diagram CSS overrides for good light/dark rendering on GitHub/docs.rs */
/* Use a GitHub-like sans-serif stack for consistent sizing/flow */
svg, svg * { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji", sans-serif; }

/* Define light defaults */
svg { --m-text: #0f172a; /* slate-900 */
      --m-edge: #334155; /* slate-700 */
      --m-label-outline: #ffffff;
      --m-cluster-bg: #f8fafc; /* zinc-50 */
      --m-cluster-border: #e5e7eb; /* zinc-200 */
      --m-cluster-bg-opacity: 0.85;
      --m-des-fill: #eaf2ff; --m-des-stroke: #3b82f6;
      --m-pri-fill: #ecfdf5; --m-pri-stroke: #10b981;
      --m-ser-fill: #fff1f2; --m-ser-stroke: #f43f5e; }

/* Dark mode overrides */
@media (prefers-color-scheme: dark) {
  svg { --m-text: #e5e7eb; /* zinc-200 */
        --m-edge: #cbd5e1; /* slate-300 */
        --m-label-outline: #0b1220;
        --m-cluster-bg: #0b1220; /* deep slate */
        --m-cluster-border: #1f2937; /* slate-800 */
        --m-cluster-bg-opacity: 0.75;
        --m-des-fill: #0b1220; --m-des-stroke: #60a5fa; /* deeper blue bg, soft blue border */
        --m-pri-fill: #052e2b; --m-pri-stroke: #34d399; /* deep teal bg, green border */
        --m-ser-fill: #2a0f12; --m-ser-stroke: #fb7185; /* deep rose bg, rose border */ }
}

/* General text and edges */
svg text { fill: var(--m-text) !important; }
svg .edgePath path, svg path { stroke: var(--m-edge) !important; }
/* Slimmer edges and smaller arrowheads */
svg .edgePath path { stroke-width: 1.2px !important; }
svg marker path {
  fill: var(--m-edge) !important;
  stroke: var(--m-edge) !important;
  stroke-width: 1.2px !important;
  transform-box: fill-box;
  transform-origin: 50% 50%;
  transform: scale(0.8);
}

/* Avoid overriding label metrics; let Mermaid compute sizes */

/* Node category fills based on classDef in the diagram (des/prio/ser) */
svg .des rect { fill: var(--m-des-fill) !important; stroke: transparent !important; }
svg .prio rect { fill: var(--m-pri-fill) !important; stroke: transparent !important; }
svg .ser rect { fill: var(--m-ser-fill) !important; stroke: transparent !important; }

/* Cluster boxes invisible; labels styled */
/* Subgraphs: no background or border, only label visible */
svg g.cluster rect { fill: transparent !important; stroke: transparent !important; }
svg .clusterLabel > text, svg .cluster-label > text {
  fill: var(--m-text) !important;
  font-size: 16px;
  font-weight: 600;
  paint-order: stroke fill;
  stroke: var(--m-label-outline);
  stroke-width: 3px;
}
