<svg id="my-svg" width="670.31640625" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="483" viewBox="-8 -8 670.31640625 483" role="graphics-document document" aria-roledescription="flowchart-v2" style="background-color: transparent;"><style>#my-svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#000000;}#my-svg .error-icon{fill:#552222;}#my-svg .error-text{fill:#552222;stroke:#552222;}#my-svg .edge-thickness-normal{stroke-width:2px;}#my-svg .edge-thickness-thick{stroke-width:3.5px;}#my-svg .edge-pattern-solid{stroke-dasharray:0;}#my-svg .edge-pattern-dashed{stroke-dasharray:3;}#my-svg .edge-pattern-dotted{stroke-dasharray:2;}#my-svg .marker{fill:#666;stroke:#666;}#my-svg .marker.cross{stroke:#666;}#my-svg svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#my-svg .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#000000;}#my-svg .cluster-label text{fill:#333;}#my-svg .cluster-label span,#my-svg p{color:#333;}#my-svg .label text,#my-svg span,#my-svg p{fill:#000000;color:#000000;}#my-svg .node rect,#my-svg .node circle,#my-svg .node ellipse,#my-svg .node polygon,#my-svg .node path{fill:#eee;stroke:#999;stroke-width:1px;}#my-svg .flowchart-label text{text-anchor:middle;}#my-svg .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#my-svg .node .label{text-align:center;}#my-svg .node.clickable{cursor:pointer;}#my-svg .arrowheadPath{fill:#333333;}#my-svg .edgePath .path{stroke:#666;stroke-width:2.0px;}#my-svg .flowchart-link{stroke:#666;fill:none;}#my-svg .edgeLabel{background-color:white;text-align:center;}#my-svg .edgeLabel rect{opacity:0.5;background-color:white;fill:white;}#my-svg .labelBkg{background-color:rgba(255, 255, 255, 0.5);}#my-svg .cluster rect{fill:hsl(0, 0%, 98.9215686275%);stroke:#707070;stroke-width:1px;}#my-svg .cluster text{fill:#333;}#my-svg .cluster span,#my-svg p{color:#333;}#my-svg div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(-160, 0%, 93.3333333333%);border:1px solid #707070;border-radius:2px;pointer-events:none;z-index:100;}#my-svg .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#000000;}#my-svg :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}#my-svg .des rect{fill:#eaf2ff!important;stroke:#3b82f6!important;stroke-width:1px!important;color:#0f172a!important;}#my-svg .des polygon{fill:#eaf2ff!important;stroke:#3b82f6!important;stroke-width:1px!important;color:#0f172a!important;}#my-svg .des ellipse{fill:#eaf2ff!important;stroke:#3b82f6!important;stroke-width:1px!important;color:#0f172a!important;}#my-svg .des circle{fill:#eaf2ff!important;stroke:#3b82f6!important;stroke-width:1px!important;color:#0f172a!important;}#my-svg .des path{fill:#eaf2ff!important;stroke:#3b82f6!important;stroke-width:1px!important;color:#0f172a!important;}#my-svg .des tspan{fill:#0f172a!important;}#my-svg .prio rect{fill:#ecfdf5!important;stroke:#10b981!important;stroke-width:1px!important;color:#064e3b!important;}#my-svg .prio polygon{fill:#ecfdf5!important;stroke:#10b981!important;stroke-width:1px!important;color:#064e3b!important;}#my-svg .prio ellipse{fill:#ecfdf5!important;stroke:#10b981!important;stroke-width:1px!important;color:#064e3b!important;}#my-svg .prio circle{fill:#ecfdf5!important;stroke:#10b981!important;stroke-width:1px!important;color:#064e3b!important;}#my-svg .prio path{fill:#ecfdf5!important;stroke:#10b981!important;stroke-width:1px!important;color:#064e3b!important;}#my-svg .prio tspan{fill:#064e3b!important;}#my-svg .ser rect{fill:#fff1f2!important;stroke:#f43f5e!important;stroke-width:1px!important;color:#7f1d1d!important;}#my-svg .ser polygon{fill:#fff1f2!important;stroke:#f43f5e!important;stroke-width:1px!important;color:#7f1d1d!important;}#my-svg .ser ellipse{fill:#fff1f2!important;stroke:#f43f5e!important;stroke-width:1px!important;color:#7f1d1d!important;}#my-svg .ser circle{fill:#fff1f2!important;stroke:#f43f5e!important;stroke-width:1px!important;color:#7f1d1d!important;}#my-svg .ser path{fill:#fff1f2!important;stroke:#f43f5e!important;stroke-width:1px!important;color:#7f1d1d!important;}#my-svg .ser tspan{fill:#7f1d1d!important;}</style><g><marker id="my-svg_flowchart-pointEnd" class="marker flowchart" viewBox="0 0 10 10" refX="6" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-pointStart" class="marker flowchart" viewBox="0 0 10 10" refX="4.5" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 5 L 10 10 L 10 0 z" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-circleEnd" class="marker flowchart" viewBox="0 0 10 10" refX="11" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-circleStart" class="marker flowchart" viewBox="0 0 10 10" refX="-1" refY="5" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><circle cx="5" cy="5" r="5" class="arrowMarkerPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-crossEnd" class="marker cross flowchart" viewBox="0 0 11 11" refX="12" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><marker id="my-svg_flowchart-crossStart" class="marker cross flowchart" viewBox="0 0 11 11" refX="-1" refY="5.2" markerUnits="userSpaceOnUse" markerWidth="11" markerHeight="11" orient="auto"><path d="M 1,1 l 9,9 M 10,1 l -9,9" class="arrowMarkerPath" style="stroke-width: 2; stroke-dasharray: 1, 0;"/></marker><g class="root"><g class="clusters"><g class="cluster default flowchart-label" id="Serialization"><rect style="fill:transparent;stroke:transparent;" rx="0" ry="0" x="0" y="252" width="219.1875" height="215"/><g class="cluster-label" transform="translate(109.59375, 252)"><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row">Serialization</tspan></text></g></g><g class="cluster default flowchart-label" id="Prioritization"><rect style="fill:transparent;stroke:transparent;" rx="0" ry="0" x="239.1875" y="252" width="224.3203125" height="130"/><g class="cluster-label" transform="translate(351.34765625, 252)"><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row">Prioritization</tspan></text></g></g><g class="cluster default flowchart-label" id="Deserialization"><rect style="fill:transparent;stroke:transparent;" rx="0" ry="0" x="106.59375" y="0" width="547.72265625" height="212"/><g class="cluster-label" transform="translate(380.455078125, 0)"><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row">Deserialization</tspan></text></g></g></g><g class="edgePaths"><path d="M310.839,45L298.495,49.75C286.151,54.5,261.462,64,249.118,75.583C236.773,87.167,236.773,100.833,236.773,113.083C236.773,125.333,236.773,136.167,246.857,144.659C256.94,153.151,277.107,159.302,287.19,162.378L297.274,165.454" id="L-A-C-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-C" style="fill:none;" marker-end="url(#my-svg_flowchart-pointEnd)"/><path d="M375.809,45L388.154,49.75C400.498,54.5,425.186,64,437.531,72.617C449.875,81.233,449.875,88.967,449.875,92.833L449.875,96.7" id="L-A-D-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-D" style="fill:none;" marker-end="url(#my-svg_flowchart-pointEnd)"/><path d="M449.875,127L449.875,130.333C449.875,133.667,449.875,140.333,439.792,146.742C429.708,153.151,409.541,159.302,399.458,162.378L389.375,165.454" id="L-D-C-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-D LE-C" style="fill:none;" marker-end="url(#my-svg_flowchart-pointEnd)"/><path d="M343.324,192L343.324,195.333C343.324,198.667,343.324,205.333,343.324,212C343.324,218.667,343.324,225.333,343.324,232C343.324,238.667,343.324,245.333,343.324,251.117C343.324,256.9,343.324,261.8,343.324,264.25L343.324,266.7" id="L-C-E-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-C LE-E" style="fill:none;" marker-end="url(#my-svg_flowchart-pointEnd)"/><path d="M343.324,297L343.324,300.333C343.324,303.667,343.324,310.333,343.935,316.142C344.547,321.951,345.769,326.903,346.38,329.379L346.991,331.854" id="L-E-F-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-E LE-F" style="fill:none;" marker-end="url(#my-svg_flowchart-pointEnd)"/><path d="M272.762,337L251.806,333.667C230.85,330.333,188.938,323.667,164.809,317.579C140.681,311.492,134.337,305.983,131.165,303.229L127.993,300.475" id="L-F-G-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-F LE-G" style="fill:none;" marker-end="url(#my-svg_flowchart-pointEnd)"/><path d="M95.197,297L91.358,300.333C87.519,303.667,79.84,310.333,107.961,317.387C136.082,324.441,200.003,331.882,231.963,335.602L263.923,339.323" id="L-G-F-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-G LE-F" style="fill:none;" marker-end="url(#my-svg_flowchart-pointEnd)"/><path d="M351.348,362L351.348,365.333C351.348,368.667,351.348,375.333,311.055,382C270.763,388.667,190.178,395.333,149.886,401.117C109.594,406.9,109.594,411.8,109.594,414.25L109.594,416.7" id="L-F-H-0" class=" edge-thickness-normal edge-pattern-solid flowchart-link LS-F LE-H" style="fill:none;" marker-end="url(#my-svg_flowchart-pointEnd)"/></g><g class="edgeLabels"><g class="edgeLabel" transform="translate(236.7734375, 114.5)"><g class="label" transform="translate(-22.2890625, -8.5)"><rect rx="0" ry="0" width="44.543670654296875" height="17.000099182128906"/><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row">Single</tspan></text></g></g><g class="edgeLabel" transform="translate(449.875, 73.5)"><g class="label" transform="translate(-27.6171875, -8.5)"><rect rx="0" ry="0" width="55.18959426879883" height="17.000099182128906"/><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row">Multiple</tspan></text></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"/><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row"/></text></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"/><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row"/></text></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"/><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row"/></text></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"/><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row"/></text></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"/><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row"/></text></g></g><g class="edgeLabel"><g class="label" transform="translate(0, 0)"><rect rx="0" ry="0" width="0" height="0"/><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row"/></text></g></g></g><g class="nodes"><g class="node default ser flowchart-label" id="flowchart-G-9" data-node="true" data-id="G" transform="translate(109.59375, 284.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-64.86328125" y="-12.5" width="129.7265625" height="25"/><g class="label" style="" transform="translate(0, -8.5)"><rect/><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row">Render attempt ⁴</tspan></text></g></g><g class="node default ser flowchart-label" id="flowchart-H-10" data-node="true" data-id="H" transform="translate(109.59375, 434.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-79.59375" y="-12.5" width="159.1875" height="25"/><g class="label" style="" transform="translate(0, -8.5)"><rect/><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row">Output preview string</tspan></text></g></g><g class="node default prio flowchart-label" id="flowchart-E-7" data-node="true" data-id="E" transform="translate(343.32421875, 284.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-74.13671875" y="-12.5" width="148.2734375" height="25"/><g class="label" style="" transform="translate(0, -8.5)"><rect/><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row">Build priority order ²</tspan></text></g></g><g class="node default prio flowchart-label" id="flowchart-F-8" data-node="true" data-id="F" transform="translate(351.34765625, 349.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-82.16015625" y="-12.5" width="164.3203125" height="25"/><g class="label" style="" transform="translate(0, -8.5)"><rect/><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row">Choose top N nodes ³</tspan></text></g></g><g class="node default des flowchart-label" id="flowchart-A-0" data-node="true" data-id="A" transform="translate(343.32421875, 32.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-43.5703125" y="-12.5" width="87.140625" height="25"/><g class="label" style="" transform="translate(0, -8.5)"><rect/><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row">Input file(s)</tspan></text></g></g><g class="node default des flowchart-label" id="flowchart-C-2" data-node="true" data-id="C" transform="translate(343.32421875, 179.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-188.0703125" y="-12.5" width="376.140625" height="25"/><g class="label" style="" transform="translate(0, -8.5)"><rect/><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row">Parse into optimized tree (with array pre‑sampling) ¹</tspan></text></g></g><g class="node default des flowchart-label" id="flowchart-D-4" data-node="true" data-id="D" transform="translate(449.875, 114.5)"><rect class="basic label-container" style="" rx="0" ry="0" x="-160.8125" y="-12.5" width="321.625" height="25"/><g class="label" style="" transform="translate(0, -8.5)"><rect/><text style=""><tspan xml:space="preserve" dy="1em" x="0" class="row">Parse each file and wrap into a fileset object</tspan></text></g></g></g></g></g><style>/* Mermaid diagram CSS overrides for good light/dark rendering on GitHub/docs.rs */
/* Use a GitHub-like sans-serif stack for consistent sizing/flow */
svg, svg * { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji", sans-serif; }

/* Define light defaults */
svg { --m-text: #0f172a; /* slate-900 */
      --m-edge: #334155; /* slate-700 */
      --m-des-fill: #eaf2ff; --m-des-stroke: #3b82f6;
      --m-pri-fill: #ecfdf5; --m-pri-stroke: #10b981;
      --m-ser-fill: #fff1f2; --m-ser-stroke: #f43f5e; }

/* Dark mode overrides */
@media (prefers-color-scheme: dark) {
  svg { --m-text: #e5e7eb; /* zinc-200 */
        --m-edge: #cbd5e1; /* slate-300 */
        --m-des-fill: #0b1220; --m-des-stroke: #60a5fa; /* deeper blue bg, soft blue border */
        --m-pri-fill: #052e2b; --m-pri-stroke: #34d399; /* deep teal bg, green border */
        --m-ser-fill: #2a0f12; --m-ser-stroke: #fb7185; /* deep rose bg, rose border */ }
}

/* General text and edges */
svg text { fill: var(--m-text) !important; }
svg .edgePath path, svg path { stroke: var(--m-edge) !important; }
svg marker path { fill: var(--m-edge) !important; }

/* Rely on Mermaid's built-in text wrapping (tspan) when htmlLabels=false */
svg .nodeLabel, svg .label { line-height: 1.3; }

/* Node category fills based on classDef in the diagram (des/prio/ser) */
svg .des rect { fill: var(--m-des-fill) !important; stroke: var(--m-des-stroke) !important; }
svg .prio rect { fill: var(--m-pri-fill) !important; stroke: var(--m-pri-stroke) !important; }
svg .ser rect { fill: var(--m-ser-fill) !important; stroke: var(--m-ser-stroke) !important; }

/* Cluster boxes invisible; labels styled */
svg g.cluster rect { fill: transparent !important; stroke: transparent !important; }
svg .clusterLabel &gt; text, svg .cluster-label &gt; text { fill: var(--m-text) !important; font-size: 16px; font-weight: 600; }
</style></svg>